{"version":3,"file":"js/289.e6e16342.js","mappings":"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","sources":["webpack://pet/./src/views/Submit.vue","webpack://pet/src/views/Submit.vue","webpack://pet/./src/views/Submit.vue?f807","webpack://pet/./src/views/Submit.vue?36fe"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"category-wrapper\"},[_c('el-card',{attrs:{\"shadow\":\"always\"}},[_c('div',{staticClass:\"control-btns\"},[_c('el-button',{staticStyle:{\"float\":\"right\",\"margin-right\":\"10px\",\"background-color\":\"blue\",\"border-color\":\"blue\"},attrs:{\"type\":\"primary\",\"size\":\"medium\"},on:{\"click\":function($event){_vm.exportVisible = true}}},[_vm._v(\"导出数据\")])],1),_c('el-form',{ref:\"searchForm\",staticClass:\"search-form\",attrs:{\"inline\":true,\"model\":_vm.listQuery,\"label-width\":\"90px\"}},[_c('el-form-item',{attrs:{\"label\":\"宠物名字\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入宠物名字\"},model:{value:(_vm.listQuery.name),callback:function ($$v) {_vm.$set(_vm.listQuery, \"name\", $$v)},expression:\"listQuery.name\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"查询\")])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.onReset}},[_vm._v(\"重置\")])],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],ref:\"multipleTable\",attrs:{\"data\":_vm.tableData},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"序号\",\"width\":\"50\",\"align\":\"center\",\"sortable\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"img\",\"label\":\"上报图片\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"plain\":\"\",\"type\":\"success\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showImgDialog(scope.$index, scope.row)}}},[_vm._v(\" 查看上报图片 \")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"上报说明\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"time\",\"label\":\"上报时间\"}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"处理状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"size\":\"small\",\"type\":scope.row.status === '已处理'?'success' : 'warning'}},[_vm._v(\" \"+_vm._s(scope.row.status)+\" \")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.status === '待处理')?_c('el-button',{attrs:{\"plain\":\"\",\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleDeal(scope.$index, scope.row)}}},[_vm._v(\"去处理\")]):_vm._e(),(_vm.userInfo.role=='USER'&&scope.row.status === '待处理')?_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleEdit(scope.$index, scope.row)}}},[_vm._v(\"编辑\")]):_vm._e(),(_vm.userInfo.role!='USER'&&scope.row.status === '已处理')?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"warning\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"删除\")]):_vm._e()]}}])})],1),_c('Pagination',{attrs:{\"total\":_vm.total,\"page\":_vm.listQuery.currentPage,\"limit\":_vm.listQuery.pageSize},on:{\"update:page\":function($event){return _vm.$set(_vm.listQuery, \"currentPage\", $event)},\"update:limit\":function($event){return _vm.$set(_vm.listQuery, \"pageSize\", $event)},\"pagination\":_vm.fetchData}}),_c('el-dialog',{staticClass:\"dialog-form\",attrs:{\"title\":\"修改上报信息\",\"visible\":_vm.formVisibleEdit,\"width\":\"50%\",\"close-on-click-modal\":false,\"modal\":false},on:{\"update:visible\":function($event){_vm.formVisibleEdit=$event}}},[_c('el-form',{ref:\"dialogForm\",attrs:{\"model\":_vm.dialogForm,\"rules\":_vm.formRules,\"label-width\":\"100px\"}},[_c('div',{staticStyle:{\"margin\":\"5px\",\"text-align\":\"center\"}},[_c('el-upload',{attrs:{\"action\":\"#\",\"list-type\":\"picture-card\",\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"on-change\":_vm.handleChange,\"file-list\":_vm.fileList,\"limit\":6,\"on-exceed\":_vm.handleExceed,\"auto-upload\":false}},[_c('i',{staticClass:\"el-icon-plus\"})])],1),_c('el-form-item',{attrs:{\"prop\":\"name\",\"label\":\"上报说明\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":4,\"autocomplete\":\"off\"},model:{value:(_vm.dialogForm.name),callback:function ($$v) {_vm.$set(_vm.dialogForm, \"name\", $$v)},expression:\"dialogForm.name\"}})],1),_c('div',{staticClass:\"footer-item\"},[_c('el-button',{on:{\"click\":function($event){_vm.formVisibleEdit = false;}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.isSubmit},on:{\"click\":function($event){return _vm.handleEditSave('dialogForm')}}},[_vm._v(\"确 定\")])],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"图片信息\",\"visible\":_vm.imgDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.imgDialogVisible=$event}}},[(_vm.imgsList.length === 0)?_c('div',{staticStyle:{\"text-align\":\"center\",\"padding\":\"20px\"}},[_vm._v(\" 暂无信息 \")]):_c('div',{staticClass:\"img-list\",staticStyle:{\"text-align\":\"center\",\"width\":\"100%\",\"margin\":\"10px\"}},_vm._l((_vm.fileList),function(img,index){return _c('img',{key:index,staticStyle:{\"width\":\"150px\",\"height\":\"150px\"},attrs:{\"src\":img.url,\"alt\":\"\"}})}),0),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.closeImgDialog}},[_vm._v(\"关闭\")])],1)]),_c('el-dialog',{attrs:{\"title\":\"导出数据\",\"visible\":_vm.exportVisible,\"width\":\"500px\"},on:{\"update:visible\":function($event){_vm.exportVisible=$event}}},[_c('div',{staticClass:\"export-data\",staticStyle:{\"display\":\"flex\",\"flex-direction\":\"row\",\"justify-content\":\"space-between\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.exportTable('xlsx')}}},[_vm._v(\"EXCEL格式\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.exportTable('csv')}}},[_vm._v(\"CSV格式\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.exportTable('txt')}}},[_vm._v(\"TXT格式\")])],1),_c('div',{staticClass:\"hints\"},[_vm._v(\"TIP：请选择要导出数据的格式。\")])])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"category-wrapper\">\n        <el-card shadow=\"always\">\n            <!-- 操作栏 -->\n            <div class=\"control-btns\">\n      \n\n\n                <el-button type=\"primary\" size=\"medium\" @click=\"exportVisible = true\"\n                    style=\"float:right;margin-right: 10px;background-color: blue;border-color: blue;\">导出数据</el-button>\n\n            </div>\n            <!-- 查询栏 -->\n            <el-form ref=\"searchForm\" :inline=\"true\" :model=\"listQuery\" label-width=\"90px\" class=\"search-form\">\n                <el-form-item label=\"宠物名字\">\n                    <el-input v-model=\"listQuery.name\" placeholder=\"请输入宠物名字\" />\n                </el-form-item>\n\n                <el-form-item>\n                    <el-button type=\"primary\" @click=\"onSubmit\">查询</el-button>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"danger\" @click=\"onReset\">重置</el-button>\n                </el-form-item>\n            </el-form>\n\n            <!-- 表格栏 -->\n            <el-table ref=\"multipleTable\" v-loading=\"listLoading\" :data=\"tableData\"\n                @selection-change=\"handleSelectionChange\">\n \n                <el-table-column prop=\"id\" label=\"序号\" width=\"50\" align=\"center\" sortable></el-table-column>\n                <el-table-column  prop=\"img\" label=\"上报图片\" >\n                    <template slot-scope=\"scope\">\n                        <el-button plain type=\"success\"  size=\"mini\" @click=\"showImgDialog(scope.$index, scope.row)\">\n                            查看上报图片\n                        </el-button>\n                    </template>\n\n                </el-table-column>\n                <el-table-column prop=\"name\" label=\"上报说明\" show-overflow-tooltip></el-table-column>\n                <el-table-column prop=\"time\" label=\"上报时间\"></el-table-column>\n                <el-table-column prop=\"status\" label=\"处理状态\">\n                    <template slot-scope=\"scope\">\n                        <el-tag size=\"small\" :type=\"scope.row.status === '已处理'?'success' : 'warning'\">\n                            {{ scope.row.status }}\n                        </el-tag>\n                        </template> \n\n                </el-table-column>\n                <el-table-column label=\"操作\" >\n                    <template slot-scope=\"scope\">\n                        <el-button plain size=\"mini\"  type=\"primary\" v-if=\"scope.row.status === '待处理'\" @click=\"handleDeal(scope.$index, scope.row)\"\n                          >去处理</el-button>\n                        <el-button size=\"mini\"  v-if=\"userInfo.role=='USER'&&scope.row.status === '待处理'\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\n                        <el-button size=\"mini\" type=\"warning\" @click=\"handleDelete(scope.$index, scope.row)\"\n                            v-if=\"userInfo.role!='USER'&&scope.row.status === '已处理'\">删除</el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <!-- 分页栏 -->\n            <Pagination :total=\"total\" :page.sync=\"listQuery.currentPage\" :limit.sync=\"listQuery.pageSize\"\n                @pagination=\"fetchData\" />\n            <!-- 新增/编辑 弹出栏 -->\n            \n\n            <el-dialog title=\"修改上报信息\" :visible.sync=\"formVisibleEdit\" width=\"50%\" class=\"dialog-form\"\n                :close-on-click-modal=\"false\" :modal=\"false\">\n                <el-form ref=\"dialogForm\" :model=\"dialogForm\" :rules=\"formRules\" label-width=\"100px\">\n                    <div style=\"margin: 5px;text-align: center\">\n                        <el-upload action=\"#\" list-type=\"picture-card\" :on-preview=\"handlePreview\"\n                            :on-remove=\"handleRemove\" :on-change=\"handleChange\" :file-list=\"fileList\" :limit=\"6\"\n                            :on-exceed=\"handleExceed\" :auto-upload=\"false\">\n                            <i class=\"el-icon-plus\"></i>\n                        </el-upload>\n                    </div>\n                    <el-form-item prop=\"name\" label=\"上报说明\">\n                        <el-input type=\"textarea\" :rows=\"4\" v-model=\"dialogForm.name\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                    <div class=\"footer-item\">\n                        <el-button @click=\"formVisibleEdit = false;\">取 消</el-button>\n                        <el-button type=\"primary\" :disabled=\"isSubmit\" @click=\"handleEditSave('dialogForm')\">确\n                            定</el-button>\n                    </div>\n                </el-form>\n            </el-dialog>\n\n            <el-dialog title=\"图片信息\" :visible.sync=\"imgDialogVisible\" width=\"50%\">\n                <div v-if=\"imgsList.length === 0\" style=\"text-align: center; padding: 20px;\">\n                    暂无信息\n                </div>\n            \n\n                <div v-else class=\"img-list\" style=\"text-align: center;width: 100%;margin:10px\">\n                    <img v-for=\"(img, index) in fileList\" :key=\"index\" :src=\"img.url\" alt=\"\" \n                        style=\"width: 150px; height: 150px;\">\n                </div>\n                <span slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"closeImgDialog\">关闭</el-button>\n                </span>\n            </el-dialog>\n\n            <!-- 导出数据 弹出栏 -->\n            <el-dialog title=\"导出数据\" :visible.sync=\"exportVisible\" width=\"500px\">\n                <div class=\"export-data\" style=\"display: flex;flex-direction: row;justify-content: space-between;\">\n                    <el-button type=\"primary\" @click=\"exportTable('xlsx')\">EXCEL格式</el-button>\n                    <el-button type=\"primary\" @click=\"exportTable('csv')\">CSV格式</el-button>\n                    <el-button type=\"primary\" @click=\"exportTable('txt')\">TXT格式</el-button>\n                </div>\n                <div class=\"hints\">TIP：请选择要导出数据的格式。</div>\n            </el-dialog>\n        </el-card>\n    </div>\n</template>\n\n<script>\nimport excel from '../utils/excel.js'\nimport Pagination from '../components/Pagination/index.vue'\nimport Upload from '../components/Upload/index.vue'\nimport Hints from '../components/Hints/index.vue'\nimport Request from '../utils/request.js'\n\nexport default {\n    inject: ['userInfo'],\n    name: 'Submit',\n    components: { Pagination, Upload, Hints },\n    data() {\n        return {\n            uploadUrl: '/api/file/upload',\n            imgBaseUrl: this.HOST,\n            fileList: [],\n            imgsList: [],\n            // 数据列表加载动画\n            listLoading: true,\n            // 查询列表参数对象\n            listQuery: {\n                name: undefined,\n\n                currentPage: 1,\n                pageSize: 10\n\n            },\n            // 新增/编辑提交表单对象\n            dialogForm: {\n                id: undefined,\n                name: undefined,\n            },\n\n            // 数据总条数\n            total: 0,\n            // 表格数据数组\n            tableData: [],\n            // 多选数据暂存数组\n            multipleSelection: [],\n            deletedImgs: [],\n            newImgs: [],\n            // 新增/编辑 弹出框显示/隐藏\n    \n            formVisibleEdit: false,\n            imgDialogVisible: false,\n            categoryList: [],\n\n            // 导入数据 弹出框 关闭事件\n            // 表单校验 trigger: ['blur', 'change'] 为多个事件触发\n            formRules: {\n                name: [\n                    { required: true, message: '请输入上报说明', trigger: 'blur' }]\n            },\n            // 防止多次连续提交表单\n            isSubmit: false,\n\n            // 导出文件格式\n            filesFormat: '.txt, .csv, .xls, .xlsx',\n            // 导出数据 弹出框显示/隐藏\n            exportVisible: false\n        }\n    },\n    created() {\n        this.fetchData()\n    },\n    methods: {\n        handlePreview(file) {\n            // 处理图片预览逻辑\n        },\n      \n        handleRemove(file, fileList) {\n            // 移除图片时的逻辑\n            this.fileList = fileList;\n            this.deletedImgs.push(file.url)\n        },\n        handleChange(file, fileList) {\n\n            this.newImgs.push(file)\n            // 处理图片变更逻辑\n            this.fileList = fileList;\n\n\n        },\n        handleExceed() {\n            this.$message({\n                type: 'warning',\n                message: '最多上传6张图片'\n            });\n        },\n\n        // 多选操作\n        handleSelectionChange(val) {\n            this.multipleSelection = val.map(v => v.id)\n        },\n\n        showImgDialog(index, row) {\n            this.loadImgs(row.id);\n\n\n            this.imgDialogVisible = true\n        },\n        closeImgDialog() {\n            this.imgDialogVisible = false\n        },\n        handleDeal(index,row){\n            Request.put(\"/submit/updateStatus/\"+row.id).then(res=>{\n                if(res.code==0){\n                    this.$message({\n                        message: \"处理成功\",\n                        type: 'success',\n                    })\n                    this.fetchData();\n                }else{\n                    this.$message({\n                        message: res.msg,\n                        type: 'error',\n                    })\n                }\n            })\n        },\n        // 编辑数据\n        handleEdit(index, row) {\n            this.fileList = [];\n            this.dialogForm = JSON.parse(JSON.stringify(row))\n            this.loadImgs(row.id)\n            this.formVisibleEdit = true\n\n        },\n        handleDelete(index, row) {\n            this.$confirm('此操作将删除选中数据, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                Request.delete(\"/submit/\" + row.id).then(response => {\n                    if (response.code == 0) {\n                        this.$message({\n                            type: 'success',\n                            message: '删除成功!'\n                        })\n                        this.onReset()\n                        this.fetchData()\n                    } else {\n                        this.$message({\n                            type: 'success',\n                            errpr: '删除失败!'\n                        })\n                    }\n                });\n\n            }).catch(() => {\n                this.$message({\n                    type: 'info',\n                    message: '已取消删除'\n                })\n            })\n        },\n\n\n        // 获取数据列表\n        fetchData() {\n            this.listLoading = true\n            Request.get(\"/submit/page\", {\n                params: {\n\n                    name: this.listQuery.name,\n\n                    currentPage: this.listQuery.currentPage,\n                    size: this.listQuery.pageSize,\n                }\n            }).then(response => {\n                const data = response.data;\n                if (response.code === '0') {\n                    this.total = data.total\n                    this.tableData = data.records\n                }\n\n            })\n            this.listLoading = false\n\n        },\n        // 查询数据\n        onSubmit() {\n            this.listQuery.currentPage = 1\n            this.fetchData()\n        },\n        onReset() {\n            this.listQuery.currentPage = 1\n            this.listQuery.pageSize = 10;\n            this.listQuery.name = \"\";\n            this.fetchData()\n        },\n\n        loadImgs(submitId) {\n            var imgUrlList = [];\n            Request.get(\"/submitImg/\" + submitId).then(response => {\n                if (response.code == 0) {\n                    imgUrlList = response.data;\n                    if (imgUrlList) {\n                        this.imgsList = imgUrlList.map(item => {\n                            this.imgBaseUrl + \"/img/\" + item.url\n                        })\n                        this.fileList = imgUrlList.map((item) => {\n\n                            item.url = this.imgBaseUrl + \"/img/\" + item.url;\n                            return item;\n\n                        });\n\n                    }\n\n                }\n            });\n        },\n        handleEditSave(formName) {\n            this.$refs[formName].validate(valid => {\n                if (valid) {\n\n\n                    const formData = new FormData();\n                    this.newImgs.forEach((file) => {\n                        formData.append('files[]', file.raw);\n                    });\n                    formData.append('deletedImgs', JSON.stringify(this.deletedImgs));\n                    const submitJson = JSON.stringify(this.dialogForm);\n\n                    formData.append('submit', submitJson);\n                    Request.post(\"/submit/update\", formData).then(response => {\n                        if (response.code == 0) {\n                            this.$message({\n                                showClose: true,\n                                message: '更新成功',\n                                type: 'success',\n                            });\n                            this.deletedImgs = [];\n                            this.newImgs = [];\n                            this.fileList = [];\n                            this.formVisibleEdit = false\n                            this.fetchData()\n                        } else {\n                            this.$message({\n                                showClose: true,\n                                message: '更新失败',\n                                type: 'error',\n                            });\n                        }\n                    });\n\n                } else {\n\n                }\n            });\n        },\n\n        exportTable(type) {\n  if (this.tableData.length) {\n    const params = {\n      header: ['序号', '上报图片', '上报说明', '上报时间', '处理状态'],\n      key: ['id', 'img', 'name', 'time','status'],\n      data: this.tableData,\n      autoWidth: true,\n      fileName: '上报信息表',\n      bookType: type\n    }\n    excel.exportDataToExcel(params)\n    this.exportVisible = false\n  }\n},\n    }\n}\n</script>\n\n<style lang=\"less\">\n.category-wrapper {\n    .el-card {\n        min-height: 656px;\n    }\n\n    .control-btns {\n\n        margin-bottom: 50px;\n    }\n\n\n    .search-form {\n\n\n        padding: 10px !important;\n        background-color: #f7f8fb;\n        height: 40px !important;\n        line-height: 40px !important;\n    }\n\n    .el-table thead {\n        font-weight: 600;\n\n        th {\n            background-color: #f2f3f7;\n        }\n    }\n\n    .dialog-form {\n        .el-input {\n            width: 90%;\n        }\n\n        .footer-item {\n            margin-top: 50px;\n            text-align: right;\n        }\n    }\n\n    .upload-box,\n    .export-data {\n        width: 300px;\n        margin: 0 auto 30px;\n    }\n\n    .upload-box {\n        width: 156px;\n\n        .files-upload {\n            color: #20a0ff;\n        }\n    }\n\n    .hints {\n        font-size: 12px;\n        color: #aaa;\n        text-align: center;\n    }\n}\n\n\n\n.avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n    border-radius: 50%;\n}\n\n// .el-upload-list__item.is-ready {\n//   display: none;\n// }\n.el-upload-list__item {\n\n    transition: none !important;\n\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Submit.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Submit.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Submit.vue?vue&type=template&id=0a98da10\"\nimport script from \"./Submit.vue?vue&type=script&lang=js\"\nexport * from \"./Submit.vue?vue&type=script&lang=js\"\nimport style0 from \"./Submit.vue?vue&type=style&index=0&id=0a98da10&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","staticStyle","on","$event","exportVisible","_v","ref","listQuery","model","value","name","callback","$$v","$set","expression","onSubmit","onReset","directives","rawName","listLoading","tableData","handleSelectionChange","scopedSlots","_u","key","fn","scope","showImgDialog","$index","row","status","_s","handleDeal","_e","userInfo","role","handleEdit","handleDelete","total","currentPage","pageSize","fetchData","formVisibleEdit","dialogForm","formRules","handlePreview","handleRemove","handleChange","fileList","handleExceed","isSubmit","handleEditSave","imgDialogVisible","imgsList","length","_l","img","index","url","slot","closeImgDialog","exportTable","staticRenderFns","inject","components","Pagination","Upload","Hints","data","uploadUrl","imgBaseUrl","HOST","undefined","id","multipleSelection","deletedImgs","newImgs","categoryList","required","message","trigger","filesFormat","created","methods","file","push","$message","type","val","map","v","loadImgs","Request","put","then","res","code","msg","JSON","parse","stringify","$confirm","confirmButtonText","cancelButtonText","delete","response","errpr","catch","get","params","size","records","submitId","imgUrlList","item","formName","$refs","validate","valid","formData","FormData","forEach","append","raw","submitJson","post","showClose","header","autoWidth","fileName","bookType","excel","component"],"sourceRoot":""}