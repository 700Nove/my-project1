{"version":3,"file":"js/48.f93f0024.js","mappings":"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","sources":["webpack://pet/./src/views/PersonInfo.vue","webpack://pet/src/views/PersonInfo.vue","webpack://pet/./src/views/PersonInfo.vue?3134","webpack://pet/./src/views/PersonInfo.vue?359b"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"user-info\",staticStyle:{\"display\":\"flex\",\"width\":\"100%\",\"justify-content\":\"center\"}},[_c('el-card',{staticStyle:{\"width\":\"40%\",\"margin\":\"20px\"}},[_c('div',{staticStyle:{\"margin\":\"15px\",\"text-align\":\"center\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.uploadUrl,\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.userInfo.avatar)?_c('el-image',{staticClass:\"avatar\",attrs:{\"src\":_vm.imgBaseUrl + '/' + _vm.userInfo.avatar}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})],1)],1),_c('el-form',{ref:\"userInfoForm\",attrs:{\"model\":_vm.userInfo,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"用户名：\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.userInfo.username),callback:function ($$v) {_vm.$set(_vm.userInfo, \"username\", $$v)},expression:\"userInfo.username\"}})],1),_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"姓名：\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.userInfo.name),callback:function ($$v) {_vm.$set(_vm.userInfo, \"name\", $$v)},expression:\"userInfo.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"性别：\",\"prop\":\"sex\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.userInfo.sex),callback:function ($$v) {_vm.$set(_vm.userInfo, \"sex\", $$v)},expression:\"userInfo.sex\"}},[_c('el-option',{attrs:{\"label\":\"男\",\"value\":\"男\"}}),_c('el-option',{attrs:{\"label\":\"女\",\"value\":\"女\"}})],1)],1),_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"邮箱：\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.userInfo.email),callback:function ($$v) {_vm.$set(_vm.userInfo, \"email\", $$v)},expression:\"userInfo.email\"}})],1),_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"电话：\",\"prop\":\"phone\"}},[_c('el-input',{model:{value:(_vm.userInfo.phone),callback:function ($$v) {_vm.$set(_vm.userInfo, \"phone\", $$v)},expression:\"userInfo.phone\"}})],1),_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"角色：\"}},[_c('div',[_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(_vm._s(_vm.getRoleName(_vm.userInfo.role)))])],1)]),(_vm.userInfo.role=='USER')?_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"账户余额:\"}},[_c('div',{staticClass:\"balance-container\"},[_c('span',{staticClass:\"balance-amount\"},[_vm._v(_vm._s(_vm.userInfo.account || 0)+\"元\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.showRechargeDialog}},[_vm._v(\"充值\")])],1)]):_vm._e(),(_vm.userInfo.role=='USER')?_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"收货地址:\",\"prop\":\"address\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.userInfo.address),callback:function ($$v) {_vm.$set(_vm.userInfo, \"address\", $$v)},expression:\"userInfo.address\"}})],1):_vm._e(),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.update}},[_vm._v(\"保存\")])],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"账户充值\",\"visible\":_vm.rechargeDialogVisible,\"width\":\"30%\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.rechargeDialogVisible=$event}}},[_c('el-form',{ref:\"rechargeForm\",attrs:{\"model\":_vm.rechargeForm,\"rules\":_vm.rechargeRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"充值金额:\",\"prop\":\"amount\"}},[_c('el-input-number',{staticStyle:{\"width\":\"200px\"},attrs:{\"min\":10,\"max\":10000,\"step\":10,\"controls-position\":\"right\"},model:{value:(_vm.rechargeForm.amount),callback:function ($$v) {_vm.$set(_vm.rechargeForm, \"amount\", $$v)},expression:\"rechargeForm.amount\"}})],1),_c('el-form-item',{attrs:{\"label\":\"支付方式:\"}},[_c('el-radio-group',{model:{value:(_vm.rechargeForm.paymentMethod),callback:function ($$v) {_vm.$set(_vm.rechargeForm, \"paymentMethod\", $$v)},expression:\"rechargeForm.paymentMethod\"}},[_c('el-radio',{attrs:{\"label\":\"alipay\"}},[_vm._v(\"支付宝\")]),_c('el-radio',{attrs:{\"label\":\"wechat\"}},[_vm._v(\"微信支付\")]),_c('el-radio',{attrs:{\"label\":\"creditCard\"}},[_vm._v(\"银行卡\")])],1)],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.rechargeDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.rechargeLoading},on:{\"click\":_vm.handleRecharge}},[_vm._v(\"确认充值\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"user-info\" style=\"display: flex; width: 100%; justify-content: center;\">\n        <el-card style=\"width: 40%;margin:20px\">\n            <div style=\"margin: 15px;text-align: center\">\n                <el-upload class=\"avatar-uploader\" :action=\"uploadUrl\" :show-file-list=\"false\"\n                    :on-success=\"handleAvatarSuccess\" :before-upload=\"beforeAvatarUpload\">\n                    <el-image v-if=\"userInfo.avatar\" :src=\"imgBaseUrl + '/' + userInfo.avatar\" class=\"avatar\" />\n                    <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n                </el-upload>\n            </div>\n            <el-form :model=\"userInfo\" :rules=\"rules\" ref=\"userInfoForm\" label-width=\"80px\">\n                <el-form-item label=\"用户名：\" prop=\"username\" style=\"width: 100%;\">\n                    <el-input v-model=\"userInfo.username\" disabled></el-input>\n                </el-form-item>\n                <el-form-item label=\"姓名：\" prop=\"name\" style=\"width: 100%;\">\n                    <el-input v-model=\"userInfo.name\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"性别：\" prop=\"sex\">\n                    <el-select v-model=\"userInfo.sex\" placeholder=\"请选择\" style=\"width: 100%;\">\n                        <el-option label=\"男\" value=\"男\"></el-option>\n                        <el-option label=\"女\" value=\"女\"></el-option>\n                    </el-select>\n                </el-form-item>\n                <el-form-item label=\"邮箱：\" prop=\"email\" style=\"width: 100%;\">\n                    <el-input v-model=\"userInfo.email\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"电话：\" prop=\"phone\" style=\"width: 100%;\">\n                    <el-input v-model=\"userInfo.phone\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"角色：\" style=\"width: 100%;\">\n                    <div>\n                        <el-tag type=\"success\">{{ getRoleName(userInfo.role) }}</el-tag>\n                    </div>\n                </el-form-item>\n                \n                <el-form-item v-if=\"userInfo.role=='USER'\" label=\"账户余额:\" style=\"width: 100%;\">\n                    <div class=\"balance-container\">\n                        <span class=\"balance-amount\">{{ userInfo.account || 0 }}元</span>\n                        <el-button type=\"primary\" size=\"small\" @click=\"showRechargeDialog\">充值</el-button>\n                    </div>\n                </el-form-item>\n                \n                <el-form-item v-if=\"userInfo.role=='USER'\" label=\"收货地址:\" prop=\"address\" style=\"width: 100%;\">\n                    <el-input type=\"textarea\" v-model=\"userInfo.address\"></el-input>\n                </el-form-item>\n                <div style=\"text-align: center;\">\n                    <el-button type=\"success\" @click=\"update\">保存</el-button>\n                </div>\n            </el-form>\n        </el-card>\n        \n        <!-- 余额充值对话框 -->\n        <el-dialog title=\"账户充值\" :visible.sync=\"rechargeDialogVisible\" width=\"30%\" center>\n            <el-form :model=\"rechargeForm\" :rules=\"rechargeRules\" ref=\"rechargeForm\" label-width=\"100px\">\n                <el-form-item label=\"充值金额:\" prop=\"amount\">\n                    <el-input-number \n                        v-model=\"rechargeForm.amount\" \n                        :min=\"10\" \n                        :max=\"10000\" \n                        :step=\"10\"\n                        controls-position=\"right\"\n                        style=\"width: 200px;\">\n                    </el-input-number>\n                </el-form-item>\n                <el-form-item label=\"支付方式:\">\n                    <el-radio-group v-model=\"rechargeForm.paymentMethod\">\n                        <el-radio label=\"alipay\">支付宝</el-radio>\n                        <el-radio label=\"wechat\">微信支付</el-radio>\n                        <el-radio label=\"creditCard\">银行卡</el-radio>\n                    </el-radio-group>\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"rechargeDialogVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"handleRecharge\" :loading=\"rechargeLoading\">确认充值</el-button>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport request from '@/utils/request';\nexport default {\n    name:'PersonInfo',\n    inject: ['userInfo'],\n    created() {\n    },\n    data() {\n        return {\n            imgBaseUrl: this.HOST,\n            uploadUrl: '/api/file/upload', // 假设的上传接口地址\n            \n            // 余额充值相关\n            rechargeDialogVisible: false,\n            rechargeLoading: false,\n            rechargeForm: {\n                amount: 100,\n                paymentMethod: 'alipay'\n            },\n            rechargeRules: {\n                amount: [\n                    { required: true, message: '请输入充值金额', trigger: 'blur' },\n                    { type: 'number', min: 10, max: 10000, message: '充值金额必须在10-10000之间', trigger: 'blur' }\n                ]\n            },\n\n            rules: {\n                name: [\n                    { required: true, message: '姓名不能为空', trigger: 'blur' },\n                    { min: 2, max: 10, message: '姓名长度必须在2到10个字符之间', trigger: 'blur' }\n                ],\n                sex: [\n                    { required: true, message: '性别不能为空', trigger: 'change' }\n                ],\n                email: [\n                    { required: true, message: '邮箱不能为空', trigger: 'blur' },\n                    { type: 'email', message: '请输入正确的邮箱地址', trigger: ['blur', 'change'] }\n                ],\n                phone: [\n                    { required: true, message: '电话不能为空', trigger: 'blur' },\n                    { pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号码', trigger: 'blur' }\n                ],\n            },\n        };\n    },\n\n    methods: {\n        // 显示充值对话框\n        showRechargeDialog() {\n            this.rechargeDialogVisible = true;\n        },\n        \n        // 处理充值请求\n        handleRecharge() {\n            this.$refs.rechargeForm.validate((valid) => {\n                if (valid) {\n                    this.rechargeLoading = true;\n                    // 模拟支付处理，实际中应调用支付接口\n                    setTimeout(() => {\n                        // 充值成功后更新用户余额\n                        const newBalance = (this.userInfo.account || 0) + this.rechargeForm.amount;\n                        \n                        // 调用后端接口更新余额\n                        request.put('/user/recharge', {\n                            userId: this.userInfo.id,\n                            amount: this.rechargeForm.amount\n                        }).then(response => {\n                            this.rechargeLoading = false;\n                            if (response.code === '0') {\n                                // 更新成功\n                                this.userInfo.account = newBalance;\n                                this.$message({\n                                    type: 'success',\n                                    message: `充值成功，账户余额已增加${this.rechargeForm.amount}元`\n                                });\n                                \n                                // 更新本地存储的用户信息\n                                sessionStorage.setItem(\"user\", JSON.stringify(this.userInfo));\n                                \n                                // 关闭对话框\n                                this.rechargeDialogVisible = false;\n                            } else {\n                                this.$message.error(response.msg || '充值失败，请稍后再试');\n                            }\n                        }).catch(error => {\n                            this.rechargeLoading = false;\n                            console.error('充值请求出错', error);\n                            this.$message.error('充值请求失败，请检查网络连接');\n                        });\n                    }, 1000);\n                }\n            });\n        },\n        \n        handleAvatarSuccess(res, file) {\n            // 处理头像上传成功后的逻辑\n            this.userInfo.avatar = res.data\n        },\n        beforeAvatarUpload(file) {\n            // 限制文件类型和大小\n            // 头像上传前的校验\n            const isImage = file.type.match('image/jpeg|image/png');\n            const isLt2M = file.size / 1024 / 1024 < 2;\n            if (!isImage) {\n                this.$message.error('上传头像图片只能是 JPG 或 PNG 格式!');\n            }\n            if (!isLt2M) {\n                this.$message.error('上传头像图片大小不能超过 2MB!');\n            }\n            return isImage && isLt2M;\n        },\n        getRoleName(role) {\n            switch (role) {\n                case 'ADMIN':\n                    return '管理员';\n                case 'USER':\n                    return '普通用户';\n                case 'SUPER_ADMIN': return '超级管理员';\n                default:\n                    return '未知角色';\n            }\n        },\n        update() {\n            this.$refs.userInfoForm.validate((valid) => {\n                if (valid) {\n      \n                    request.put(\"/user/\" + this.userInfo.id, this.userInfo).then(response => {\n                        if (response.code == '0') {\n                            this.$message({\n                                type: 'success',\n                                message: '信息保存成功!',\n                            })\n\n                            sessionStorage.setItem(\"user\", JSON.stringify(this.userInfo))\n                            this.$emit(\"update:user\", this.userInfo)\n\n                        } else {\n                            this.$message({\n                                type: 'error',\n                                message: response.msg\n                            })\n                        }\n                    })\n                } else {\n      \n                    return false;\n                }\n            });\n        }\n    }\n};\n</script>\n\n<style scoped>\ndiv /deep/.el-form-item__label {\n    font-weight: bold;\n}\n\ndiv /deep/.el-upload {\n    border-radius: 50%;\n}\n\n.avatar-uploader .el-upload {\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n}\n\n.avatar-uploader-icon {\n    font-size: 28px;\n    border: 1.5px dashed #d9d9d9;\n    background-color: rgba(255, 255, 255, 0.479);\n    border-radius: 6px;\n    color: #006aff;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    transition: 0.5s;\n    text-align: center;\n    border-radius: 50%;\n}\n\n.avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n    border-radius: 50%;\n}\n\n/* 余额显示样式 */\n.balance-container {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    max-width: 300px;\n}\n\n.balance-amount {\n    font-size: 16px;\n    font-weight: bold;\n    color: #409EFF;\n}\n\n/* 充值对话框样式 */\n.el-dialog__body {\n    padding: 20px 30px 30px 30px;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PersonInfo.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PersonInfo.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PersonInfo.vue?vue&type=template&id=d5be3e1a&scoped=true\"\nimport script from \"./PersonInfo.vue?vue&type=script&lang=js\"\nexport * from \"./PersonInfo.vue?vue&type=script&lang=js\"\nimport style0 from \"./PersonInfo.vue?vue&type=style&index=0&id=d5be3e1a&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d5be3e1a\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","attrs","uploadUrl","handleAvatarSuccess","beforeAvatarUpload","userInfo","avatar","imgBaseUrl","ref","rules","model","value","username","callback","$$v","$set","expression","name","sex","email","phone","_v","_s","getRoleName","role","account","on","showRechargeDialog","_e","address","update","rechargeDialogVisible","$event","rechargeForm","rechargeRules","amount","paymentMethod","slot","rechargeLoading","handleRecharge","staticRenderFns","inject","created","data","HOST","required","message","trigger","type","min","max","pattern","methods","$refs","validate","valid","setTimeout","newBalance","request","put","userId","id","then","response","code","$message","sessionStorage","setItem","JSON","stringify","error","msg","catch","console","res","file","isImage","match","isLt2M","size","userInfoForm","$emit","component"],"sourceRoot":""}