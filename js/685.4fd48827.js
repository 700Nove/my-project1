"use strict";(self["webpackChunkpet"]=self["webpackChunkpet"]||[]).push([[685],{685:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"category-wrapper"},[t("el-card",{attrs:{shadow:"always"}},[t("div",{staticClass:"control-btns"},[t("el-popconfirm",{attrs:{title:"确认删除?"},on:{confirm:e.batchDelete},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-button",{staticStyle:{"background-color":"red","border-color":"red"},attrs:{type:"danger",size:"medium"}},[e._v("批量删除")])]},proxy:!0}])}),t("el-button",{staticStyle:{float:"right","background-color":"blue","border-color":"blue"},attrs:{type:"primary",size:"medium"},on:{click:e.handleCreate}},[e._v("添加物流公司")]),t("el-button",{staticStyle:{float:"right","margin-right":"10px","background-color":"blue","border-color":"blue"},attrs:{type:"primary",size:"medium"},on:{click:function(t){e.exportVisible=!0}}},[e._v("导出数据")])],1),t("el-form",{staticClass:"search-form",attrs:{inline:!0,model:e.listQuery}},[t("el-form-item",{attrs:{label:"公司名称"}},[t("el-input",{attrs:{placeholder:"请输入公司名称"},model:{value:e.listQuery.companyName,callback:function(t){e.$set(e.listQuery,"companyName",t)},expression:"listQuery.companyName"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{on:{click:e.onReset}},[e._v("重置")])],1)],1),t("el-table",{attrs:{data:e.tableData,"header-cell-style":{background:"#f5f7fa",color:"#606266"},"cell-style":{padding:"8px 0"},stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t("el-table-column",{attrs:{prop:"companyId",label:"公司ID",width:"80",align:"center"}}),t("el-table-column",{attrs:{prop:"companyName",label:"公司名称",width:"180","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"contactPhone",label:"联系电话",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"info"}},[e._v(e._s(a.row.contactPhone))])]}}])}),t("el-table-column",{attrs:{prop:"notes",label:"备注信息","min-width":"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"createdAt",label:"创建时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"success"}},[e._v(e._s(a.row.createdAt))])]}}])}),t("el-table-column",{attrs:{prop:"updatedAt",label:"更新时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"warning"}},[e._v(e._s(a.row.updatedAt))])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return e.handleEdit(a.$index,a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){return e.handleDelete(a.$index,a.row)}}},[e._v("删除")])]}}])})],1),t("Pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.fetchData}}),t("el-dialog",{staticClass:"dialog-form",attrs:{title:"添加物流公司",visible:e.formVisibleAdd,width:"30%",modal:!1},on:{"update:visible":function(t){e.formVisibleAdd=t}}},[t("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.formRules,"label-width":"100px"}},[e.dialogForm.companyId?t("el-form-item",{attrs:{label:"公司ID"}},[t("el-input",{attrs:{disabled:""},model:{value:e.dialogForm.companyId,callback:function(t){e.$set(e.dialogForm,"companyId",t)},expression:"dialogForm.companyId"}})],1):e._e(),t("el-form-item",{attrs:{label:"公司名称",prop:"companyName"}},[t("el-input",{model:{value:e.dialogForm.companyName,callback:function(t){e.$set(e.dialogForm,"companyName",t)},expression:"dialogForm.companyName"}})],1),t("el-form-item",{attrs:{label:"联系电话",prop:"contactPhone"}},[t("el-input",{model:{value:e.dialogForm.contactPhone,callback:function(t){e.$set(e.dialogForm,"contactPhone",t)},expression:"dialogForm.contactPhone"}})],1),t("el-form-item",{attrs:{label:"备注信息",prop:"notes"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.notes,callback:function(t){e.$set(e.dialogForm,"notes",t)},expression:"dialogForm.notes"}})],1),t("div",{staticClass:"footer-item"},[t("el-button",{on:{click:function(t){e.formVisibleAdd=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",disabled:e.isSubmit},on:{click:function(t){return e.handleAdd("dialogForm")}}},[e._v("确 定")])],1)],1)],1),t("el-dialog",{staticClass:"dialog-form",attrs:{title:"修改公司信息",visible:e.formVisibleEdit,width:"30%"},on:{"update:visible":function(t){e.formVisibleEdit=t}}},[t("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.formRules,"label-width":"100px"}},[e.dialogForm.companyId?t("el-form-item",{attrs:{label:"公司ID"}},[t("el-input",{attrs:{disabled:""},model:{value:e.dialogForm.companyId,callback:function(t){e.$set(e.dialogForm,"companyId",t)},expression:"dialogForm.companyId"}})],1):e._e(),t("el-form-item",{attrs:{label:"公司名称",prop:"companyName"}},[t("el-input",{model:{value:e.dialogForm.companyName,callback:function(t){e.$set(e.dialogForm,"companyName",t)},expression:"dialogForm.companyName"}})],1),t("el-form-item",{attrs:{label:"联系电话",prop:"contactPhone"}},[t("el-input",{model:{value:e.dialogForm.contactPhone,callback:function(t){e.$set(e.dialogForm,"contactPhone",t)},expression:"dialogForm.contactPhone"}})],1),t("el-form-item",{attrs:{label:"备注信息",prop:"notes"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.notes,callback:function(t){e.$set(e.dialogForm,"notes",t)},expression:"dialogForm.notes"}})],1),t("div",{staticClass:"footer-item"},[t("el-button",{on:{click:function(t){e.formVisibleEdit=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",disabled:e.isSubmit},on:{click:function(t){return e.handleEditSave("dialogForm")}}},[e._v("确 定")])],1)],1)],1),t("el-dialog",{attrs:{title:"导出数据",visible:e.exportVisible,width:"500px"},on:{"update:visible":function(t){e.exportVisible=t}}},[t("div",{staticClass:"export-data",staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.exportTable("xlsx")}}},[e._v("EXCEL格式")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.exportTable("csv")}}},[e._v("CSV格式")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.exportTable("txt")}}},[e._v("TXT格式")])],1),t("div",{staticClass:"hints"},[e._v("TIP：请选择要导出数据的格式。")])])],1)],1)},l=[],i=a(186),s=a(1184),r=a(1867),n=a(193),c=a(7120),m={name:"Catetory",components:{Pagination:s.A,Upload:r.A,Hints:n.A},data(){return{listLoading:!0,listQuery:{companyName:"",currentPage:1,pageSize:10},dialogForm:{companyId:null,companyName:"",contactPhone:"",notes:"",createdAt:null,updatedAt:null},total:0,tableData:[],multipleSelection:[],formVisible:!1,formVisibleAdd:!1,formVisibleEdit:!1,formRules:{companyName:[{required:!0,trigger:"blur",message:"公司名称不能为空"}],contactPhone:[{required:!0,trigger:"blur",message:"联系电话不能为空"}],notes:[{max:200,message:"备注信息不能超过200个字符",trigger:"blur"}]},isSubmit:!1,filesFormat:".txt, .csv, .xls, .xlsx",exportVisible:!1}},created(){this.fetchData()},methods:{handleSelectionChange(e){this.multipleSelection=e.map((e=>e.companyId))},handleCreate(){this.formVisibleAdd=!0,this.dialogForm={}},handleEdit(e,t){this.dialogForm=JSON.parse(JSON.stringify(t)),this.formVisibleEdit=!0},handleDelete(e,t){t.companyId;this.$confirm("此操作将删除选中数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{c.A.delete("/logisticsCompany/"+t.companyId).then((e=>{"0"===e.code?(this.$message({type:"success",message:"删除成功!"}),this.onReset()):this.$message({type:"success",errpr:"删除失败!"})}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},batchDelete(){this.multipleSelection.length<1?this.$message({message:"请先选择要删除的数据！",type:"warning"}):c.A.delete(`/logisticsCompany/deleteBatch?ids=${this.multipleSelection.join(",")}`).then((e=>{"0"===e.code?(this.$message({showClose:!0,message:"批量删除成功",type:"success"}),this.onReset()):this.$message({showClose:!0,message:e.msg,type:"error"})}))},fetchData(){this.listLoading=!0,c.A.get("/logisticsCompany/page",{params:{companyName:this.listQuery.companyName,currentPage:this.listQuery.currentPage,size:this.listQuery.pageSize}}).then((e=>{const t=e.data;"0"===e.code&&(this.total=t.total,this.tableData=t.records)})),this.listLoading=!1},onSubmit(){this.listQuery.currentPage=1,this.fetchData()},onReset(){this.listQuery.currentPage=1,this.listQuery.pageSize=10,this.listQuery.companyName="",this.fetchData()},handleAdd(e){this.$refs[e].validate((e=>e?(c.A.post("/logisticsCompany",this.dialogForm).then((e=>{0==e.code?(this.$message({showClose:!0,message:"添加成功",type:"success"}),this.fetchData()):this.$message({showClose:!0,message:e.msg,type:"error"})})),this.formVisibleAdd=!1,!0):(this.isSubmit=!1,!1)))},handleEditSave(e){this.$refs[e].validate((e=>{e&&c.A.put("/logisticsCompany/"+this.dialogForm.companyId,this.dialogForm).then((e=>{0==e.code?(this.$message({showClose:!0,message:"更新成功",type:"success"}),this.formVisibleEdit=!1,this.resetListQuery(),this.fetchData()):this.$message({showClose:!0,message:"更新失败",type:"error"})}))}))},exportTable(e){if(this.tableData.length){const t={header:["公司ID","公司名称","联系电话","备注信息","创建时间","更新时间"],key:["companyId","companyName","contactPhone","notes","createdAt","updatedAt"],data:this.tableData,autoWidth:!0,fileName:"物流公司数据",bookType:e};i.Ay.exportDataToExcel(t),this.exportVisible=!1}}}},d=m,p=a(1656),u=(0,p.A)(d,o,l,!1,null,null,null),h=u.exports}}]);
//# sourceMappingURL=685.4fd48827.js.map