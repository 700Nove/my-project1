{"version":3,"file":"js/256.7fd11d19.js","mappings":"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","sources":["webpack://pet/./src/views/Training.vue","webpack://pet/src/views/Training.vue","webpack://pet/./src/views/Training.vue?ca75","webpack://pet/./src/views/Training.vue?a21e"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"training-wrapper\"},[_c('el-card',{attrs:{\"shadow\":\"always\"}},[_c('el-form',{ref:\"searchForm\",staticClass:\"search-form\",attrs:{\"inline\":true,\"model\":_vm.listQuery,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"训练服务类型\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择训练服务类型\"},model:{value:(_vm.listQuery.serviceType),callback:function ($$v) {_vm.$set(_vm.listQuery, \"serviceType\", $$v)},expression:\"listQuery.serviceType\"}},_vm._l((_vm.serviceTypeList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.name}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"查询\")])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.onReset}},[_vm._v(\"重置\")])],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],ref:\"multipleTable\",attrs:{\"data\":_vm.tableData},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"petName\",\"label\":\"宠物名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"userName\",\"label\":\"用户名\"}}),_c('el-table-column',{attrs:{\"prop\":\"serviceType\",\"label\":\"训练服务类型\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"endDate\",\"label\":\"预计结束日期\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"trainingLevel\",\"label\":\"训练级别\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"trainingGoals\",\"label\":\"训练目标\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"completionStatus\",\"label\":\"完成状态\",\"show-overflow-tooltip\":\"\"}}),(_vm.userInfo.role!='USER')?_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.completionStatus === '未开始')?_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleEdit(scope.$index, scope.row)}}},[_vm._v(\"编辑\")]):_vm._e(),(scope.row.completionStatus === '完成')?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"删除\")]):_vm._e(),(scope.row.completionStatus === '未开始')?_c('el-button',{attrs:{\"plain\":\"\",\"type\":\"warning\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleModifyTraining(scope.$index, scope.row,'训练中')}}},[_vm._v(\"开始训练\")]):(scope.row.completionStatus === '训练中')?_c('el-button',{attrs:{\"plain\":\"\",\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleModifyTraining(scope.$index, scope.row,'完成')}}},[_vm._v(\"训练结束\")]):_c('el-button',{attrs:{\"plain\":\"\",\"type\":\"success\",\"size\":\"mini\",\"disabled\":\"\"}},[_vm._v(\"已结束\")])]}}],null,false,762349300)}):_vm._e()],1),_c('Pagination',{attrs:{\"total\":_vm.total,\"page\":_vm.listQuery.currentPage,\"limit\":_vm.listQuery.pageSize},on:{\"update:page\":function($event){return _vm.$set(_vm.listQuery, \"currentPage\", $event)},\"update:limit\":function($event){return _vm.$set(_vm.listQuery, \"pageSize\", $event)},\"pagination\":_vm.fetchData}}),_c('el-dialog',{staticClass:\"dialog-form\",attrs:{\"title\":\"修改训练服务\",\"visible\":_vm.formVisibleEdit,\"width\":\"30%\",\"modal\":false},on:{\"update:visible\":function($event){_vm.formVisibleEdit=$event}}},[_c('el-form',{ref:\"dialogForm\",attrs:{\"model\":_vm.dialogForm,\"rules\":_vm.formRules,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"prop\":\"userName\",\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":true,\"autocomplete\":\"off\"},model:{value:(_vm.dialogForm.userName),callback:function ($$v) {_vm.$set(_vm.dialogForm, \"userName\", $$v)},expression:\"dialogForm.userName\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"petName\",\"label\":\"宠物\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.dialogForm.petName),callback:function ($$v) {_vm.$set(_vm.dialogForm, \"petName\", $$v)},expression:\"dialogForm.petName\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"serviceType\",\"label\":\"训练服务类型\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择训练服务类型\"},model:{value:(_vm.dialogForm.serviceType),callback:function ($$v) {_vm.$set(_vm.dialogForm, \"serviceType\", $$v)},expression:\"dialogForm.serviceType\"}},_vm._l((_vm.serviceTypeList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.name}})}),1)],1),_c('el-form-item',{attrs:{\"prop\":\"endDate\",\"label\":\"预计结束日期\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.dialogForm.endDate),callback:function ($$v) {_vm.$set(_vm.dialogForm, \"endDate\", $$v)},expression:\"dialogForm.endDate\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"trainingLevel\",\"label\":\"训练级别\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.dialogForm.trainingLevel),callback:function ($$v) {_vm.$set(_vm.dialogForm, \"trainingLevel\", $$v)},expression:\"dialogForm.trainingLevel\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"trainingGoals\",\"label\":\"训练目标\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.dialogForm.trainingGoals),callback:function ($$v) {_vm.$set(_vm.dialogForm, \"trainingGoals\", $$v)},expression:\"dialogForm.trainingGoals\"}})],1),_c('div',{staticClass:\"footer-item\"},[_c('el-button',{on:{\"click\":function($event){_vm.formVisibleEdit = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.isSubmit},on:{\"click\":function($event){return _vm.handleEditSave('dialogForm')}}},[_vm._v(\"确 定\")])],1)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"training-wrapper\">\n        <el-card shadow=\"always\">\n      \n            <!-- 查询栏 -->\n            <el-form ref=\"searchForm\" :inline=\"true\" :model=\"listQuery\" label-width=\"120px\" class=\"search-form\">\n                <el-form-item label=\"训练服务类型\">\n                    <el-select v-model=\"listQuery.serviceType\" placeholder=\"请选择训练服务类型\">\n                        <el-option v-for=\"item in serviceTypeList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.name\"></el-option>\n                    </el-select>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"primary\" @click=\"onSubmit\">查询</el-button>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"danger\" @click=\"onReset\">重置</el-button>\n                </el-form-item>\n            </el-form>\n            <!-- 表格栏 -->\n            <el-table ref=\"multipleTable\" v-loading=\"listLoading\" :data=\"tableData\"\n                @selection-change=\"handleSelectionChange\">\n                <el-table-column type=\"selection\" width=\"55\" align=\"center\"></el-table-column>\n            \n                <el-table-column prop=\"petName\" label=\"宠物名称\" ></el-table-column>\n                <el-table-column prop=\"userName\"  label=\"用户名\"></el-table-column>\n                <el-table-column prop=\"serviceType\" label=\"训练服务类型\" show-overflow-tooltip></el-table-column>\n                <el-table-column prop=\"endDate\" label=\"预计结束日期\" show-overflow-tooltip></el-table-column>\n                <el-table-column prop=\"trainingLevel\" label=\"训练级别\" show-overflow-tooltip></el-table-column>\n                <el-table-column prop=\"trainingGoals\" label=\"训练目标\" show-overflow-tooltip></el-table-column>\n                <el-table-column prop=\"completionStatus\" label=\"完成状态\" show-overflow-tooltip></el-table-column>\n                <el-table-column v-if=\"userInfo.role!='USER'\" label=\"操作\" >\n                    <template slot-scope=\"scope\">\n                        <el-button v-if=\"scope.row.completionStatus === '未开始'\"  size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\n                        <el-button  v-if=\"scope.row.completionStatus === '完成'\" size=\"mini\" type=\"danger\"\n                            @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\n\n                        <el-button plain type=\"warning\" size=\"mini\" v-if=\"scope.row.completionStatus === '未开始'\"\n                            @click=\"handleModifyTraining(scope.$index, scope.row,'训练中')\">开始训练</el-button>\n                        <el-button plain type=\"primary\" size=\"mini\" v-else-if=\"scope.row.completionStatus === '训练中'\"\n                            @click=\"handleModifyTraining(scope.$index, scope.row,'完成')\">训练结束</el-button>\n                        <el-button plain type=\"success\" size=\"mini\" v-else disabled>已结束</el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <!-- 分页栏 -->\n            <Pagination :total=\"total\" :page.sync=\"listQuery.currentPage\" :limit.sync=\"listQuery.pageSize\"\n                @pagination=\"fetchData\" />\n\n            <el-dialog title=\"修改训练服务\" :visible.sync=\"formVisibleEdit\" width=\"30%\" class=\"dialog-form\" :modal=\"false\">\n                <el-form ref=\"dialogForm\" :model=\"dialogForm\" :rules=\"formRules\" label-width=\"120px\">\n                    <el-form-item prop=\"userName\" label=\"用户名\">\n                        <el-input :disabled=\"true\" v-model=\"dialogForm.userName\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                    <el-form-item prop=\"petName\" label=\"宠物\">\n                        <el-input v-model=\"dialogForm.petName\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                    <el-form-item prop=\"serviceType\" label=\"训练服务类型\">\n                <el-select v-model=\"dialogForm.serviceType\" placeholder=\"请选择训练服务类型\">\n                    <el-option v-for=\"item in serviceTypeList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.name\"></el-option>\n                </el-select>\n            </el-form-item>\n            \n                    <el-form-item prop=\"endDate\" label=\"预计结束日期\">\n                        <el-date-picker v-model=\"dialogForm.endDate\" type=\"date\" placeholder=\"选择日期\"></el-date-picker>\n                    </el-form-item>\n                    <el-form-item prop=\"trainingLevel\" label=\"训练级别\">\n                        <el-input v-model=\"dialogForm.trainingLevel\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                    <el-form-item prop=\"trainingGoals\" label=\"训练目标\">\n                        <el-input v-model=\"dialogForm.trainingGoals\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n          \n                    <div class=\"footer-item\">\n                        <el-button @click=\"formVisibleEdit = false\">取 消</el-button>\n                        <el-button type=\"primary\" :disabled=\"isSubmit\" @click=\"handleEditSave('dialogForm')\">确\n                            定</el-button>\n                    </div>\n                </el-form>\n            </el-dialog>\n        </el-card>\n    </div>\n</template>\n\n<script>\nimport excel from '../utils/excel.js'\nimport Pagination from '../components/Pagination/index.vue'\nimport Upload from '../components/Upload/index.vue'\nimport Hints from '../components/Hints/index.vue'\nimport Request from '../utils/request.js'\n\nexport default {\n    inject: ['userInfo'],\n    name: 'TrainingManager',\n    components: { Pagination, Upload, Hints },\n    data() {\n        return {\n            uploadUrl: '/api/file/upload',\n\n            // 数据列表加载动画\n            listLoading: true,\n            // 查询列表参数对象\n            listQuery: {\n                serviceType: undefined,\n                currentPage: 1,\n                pageSize: 10\n            },\n            // 新增/编辑提交表单对象\n            dialogForm: {\n                petName:'',\n                serviceType: '',\n                endDate: '',\n                trainingLevel: '',\n                trainingGoals: '',\n        \n            },\n            // 数据总条数\n            total: 0,\n            // 表格数据数组\n            tableData: [],\n            // 多选数据暂存数组\n            multipleSelection: [],\n\n\n            formVisibleEdit: false,\n            // 训练服务类型列表\n            serviceTypeList: [],\n            // 表单校验 trigger: ['blur', 'change'] 为多个事件触发\n            formRules: {\n                serviceType: [\n                    { required: true, message: '请选择训练服务类型', trigger: 'blur' }\n                ],\n                endDate: [\n          { required: true, message: '请选择预计结束日期', trigger: 'blur' },\n          { type: 'date', validator: this.validateEndDate, trigger: 'change' }\n        ],\n                trainingLevel: [\n                    { required: true, message: '请输入训练级别', trigger: 'blur' }\n                ],\n                trainingGoals: [\n                    { required: true, message: '请输入训练目标', trigger: 'blur' }\n                ],\n                petName: [\n                    { required: true, message: '宠物名称', trigger: 'blur' }\n                ]\n            },\n            // 防止多次连续提交表单\n            isSubmit: false\n        }\n    },\n    created() {\n        this.loadServiceType();\n        this.fetchData()\n    },\n    methods: {\n        validateEndDate(rule, value, callback) {\n      if (value) {\n        const endDate = new Date(value);\n        const now = new Date();\n        if (endDate.getTime() < now.getTime()) {\n          callback(new Error('预计结束日期不得早于当前日期'));\n        } else {\n          callback();\n        }\n      } else {\n        callback();\n      }\n    },\n        // 多选操作\n        handleSelectionChange(val) {\n            this.multipleSelection = val.map(v => v.id)\n        },\n\n        // 编辑数据\n        handleEdit(index, row) {\n    \n            this.dialogForm = JSON.parse(JSON.stringify(row))\n            this.formVisibleEdit = true\n        },\n        loadServiceType() {\n            Request.get('/trainingName/selectAll').then(res => {\n                if (res.code == 0) {\n                    this.serviceTypeList = res.data\n                }\n            })\n        },\n        handleDelete(index, row) {\n            this.$confirm('此操作将删除选中数据, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                Request.delete(\"/petTrainingService/\" + row.id).then(response => {\n                    if (response.code == 0) {\n                        this.$message({\n                            type: 'success',\n                            message: '删除成功!'\n                        })\n                        this.onReset()\n                    } else {\n                        this.$message({\n                            type: 'success',\n                            error: response.msg\n                        })\n                    }\n                });\n            }).catch(() => {\n                this.$message({\n                    type: 'info',\n                    message: '已取消删除'\n                })\n            })\n        },\n        handleModifyTraining(index, row,status) {\n              \n                var data = JSON.parse(JSON.stringify(row))\n                data.completionStatus=status\n                Request.put(\"/petTrainingService/\"+data.id,data).then(res=>{\n                    if(res.code == 0){\n                        this.$message({\n                            showClose: true,\n                            message: '修改成功',\n                            type:'success',\n                        });\n                        this.fetchData()\n                    }else{\n                        this.$message({\n                            showClose: true,\n                            message: res.msg,\n                            type: 'error',\n                        });\n                    }\n                })\n\n        },\n        handleEndTraining(index, row) {\n            // 训练结束的逻辑\n        },\n        handleEditSave(formName) {\n            this.$refs[formName].validate(valid => {\n                if (valid) {\n                    Request.put(\"/petTrainingService/\" + this.dialogForm.id, this.dialogForm).then(response => {\n                        if (response.code == 0) {\n                            this.$message({\n                                showClose: true,\n                                message: '更新成功',\n                                type: 'success',\n                            });\n                            this.formVisibleEdit = false\n                            this.fetchData()\n                        } else {\n                            this.$message({\n                                showClose: true,\n                                message: response.msg,\n                                type: 'error',\n                            });\n                        }\n                    });\n                } else {\n                    this.isSubmit = false\n                    return false\n                }\n            })\n        },\n        // 获取数据列表\n        fetchData() {\n            this.listLoading = true\n            \n            Request.get(\"/petTrainingService/selectPage\", {\n                params: {\n                    username:this.userInfo.role=='USER'?this.userInfo.username:'',\n                    serviceType: this.listQuery.serviceType,\n                    currentPage: this.listQuery.currentPage,\n                    pageSize: this.listQuery.pageSize,\n                }\n            }).then(response => {\n                const data = response.data;\n                if (response.code === '0') {\n                    this.total = data.total\n                    this.tableData = data.records\n                    console.log(this.userInfo)\n                    // if(this.userInfo.role=='USER'){\n                    //     this.tableData = data.records.filter(record => record.userName === this.userInfo.username);\n                    // }\n                }\n            })\n            this.listLoading = false\n        },\n        // 查询数据\n        onSubmit() {\n            this.listQuery.currentPage = 1\n            this.fetchData()\n        },\n        onReset() {\n            this.listQuery.currentPage = 1\n            this.listQuery.pageSize = 10;\n            this.listQuery.serviceType = \"\";\n            this.fetchData()\n        }\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.training-wrapper {\n    .el-card {\n        min-height: 656px;\n    }\n\n    .control-btns {\n        margin-bottom: 20px;\n    }\n\n    .search-form {\n        padding-bottom: 20px !important;\n        margin-bottom: 15px;\n        background-color: #f7f8fb;\n        height: 35px !important;\n        line-height: 35px !important;\n    }\n\n    .el-table thead {\n        font-weight: 600;\n\n        th {\n            background-color: #f2f3f7;\n        }\n    }\n\n    .dialog-form {\n        .el-input {\n            width: 90%;\n        }\n\n        .footer-item {\n            margin-top: 50px;\n            text-align: right;\n        }\n    }\n\n    .upload-box,\n    .export-data {\n        width: 300px;\n        margin: 0 auto 30px;\n    }\n\n    .upload-box {\n        width: 156px;\n\n        .files-upload {\n            color: #20a0ff;\n        }\n    }\n\n    .hints {\n        font-size: 12px;\n        color: #aaa;\n        text-align: center;\n    }\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Training.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Training.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Training.vue?vue&type=template&id=14cb1c3c&scoped=true\"\nimport script from \"./Training.vue?vue&type=script&lang=js\"\nexport * from \"./Training.vue?vue&type=script&lang=js\"\nimport style0 from \"./Training.vue?vue&type=style&index=0&id=14cb1c3c&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"14cb1c3c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","ref","listQuery","model","value","serviceType","callback","$$v","$set","expression","_l","serviceTypeList","item","key","id","name","on","onSubmit","_v","onReset","directives","rawName","listLoading","tableData","handleSelectionChange","userInfo","role","scopedSlots","_u","fn","scope","row","completionStatus","$event","handleEdit","$index","_e","handleDelete","handleModifyTraining","total","currentPage","pageSize","fetchData","formVisibleEdit","dialogForm","formRules","userName","petName","endDate","trainingLevel","trainingGoals","isSubmit","handleEditSave","staticRenderFns","inject","components","Pagination","Upload","Hints","data","uploadUrl","undefined","multipleSelection","required","message","trigger","type","validator","validateEndDate","created","loadServiceType","methods","rule","Date","now","getTime","Error","val","map","v","index","JSON","parse","stringify","Request","get","then","res","code","$confirm","confirmButtonText","cancelButtonText","delete","response","$message","error","msg","catch","status","put","showClose","handleEndTraining","formName","$refs","validate","valid","params","username","records","console","log","component"],"sourceRoot":""}