"use strict";(self["webpackChunkpet"]=self["webpackChunkpet"]||[]).push([[788],{1788:function(s,r,e){e.r(r),e.d(r,{default:function(){return n}});var o=function(){var s=this,r=s._self._c;return r("div",{staticClass:"password-change",staticStyle:{display:"flex",width:"100%","justify-content":"center"}},[r("el-card",{staticStyle:{width:"40%",margin:"20px"}},[r("div",{staticStyle:{margin:"15px","text-align":"center"}},[r("h3",[s._v("修改密码")])]),r("el-form",{ref:"passwordForm",attrs:{model:s.passwordForm,rules:s.passwordRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"旧密码:",prop:"oldPassword"}},[r("el-input",{attrs:{type:"password",autocomplete:"off","show-password":!0},model:{value:s.passwordForm.oldPassword,callback:function(r){s.$set(s.passwordForm,"oldPassword",r)},expression:"passwordForm.oldPassword"}})],1),r("el-form-item",{attrs:{label:"新密码:",prop:"newPassword"}},[r("el-input",{attrs:{type:"password",autocomplete:"off","show-password":!0},model:{value:s.passwordForm.newPassword,callback:function(r){s.$set(s.passwordForm,"newPassword",r)},expression:"passwordForm.newPassword"}})],1),r("el-form-item",{attrs:{label:"确认密码:",prop:"confirmPassword"}},[r("el-input",{attrs:{type:"password",autocomplete:"off","show-password":!0},model:{value:s.passwordForm.confirmPassword,callback:function(r){s.$set(s.passwordForm,"confirmPassword",r)},expression:"passwordForm.confirmPassword"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:s.submitForm}},[s._v("提交")]),r("el-button",{on:{click:s.resetForm}},[s._v("重置")])],1)],1)],1)],1)},t=[],a=(e(4114),e(7120)),d={inject:["userInfo"],created(){},data(){const s=(s,r,e)=>{r.length<6?e(new Error("密码长度不能少于6位")):e()},r=(s,r,e)=>{r!==this.passwordForm.newPassword?e(new Error("两次输入密码不一致")):e()};return{correctPassword:this.userInfo.password,passwordForm:{oldPassword:"",newPassword:"",confirmPassword:""},passwordRules:{oldPassword:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPassword:[{required:!0,validator:s,trigger:"blur"}],confirmPassword:[{required:!0,validator:r,trigger:"blur"}]}}},methods:{submitForm(){this.$refs.passwordForm.validate((s=>{if(!s)return console.error("表单验证失败!"),!1;a.A.put("/user/password/"+this.userInfo.id,this.passwordForm).then((s=>{"0"==s.code?(this.$message({type:"success",message:"密码修改成功!请重新登录！"}),this.resetForm(),sessionStorage.removeItem("user"),this.$router.push({path:"/login"})):this.$message({type:"error",message:s.msg})}))}))},resetForm(){this.$refs.passwordForm.resetFields()}}},l=d,i=e(1656),w=(0,i.A)(l,o,t,!1,null,"9adfd95e",null),n=w.exports}}]);
//# sourceMappingURL=788.e53de57b.js.map