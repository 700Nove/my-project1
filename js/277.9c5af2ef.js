"use strict";(self["webpackChunkpet"]=self["webpackChunkpet"]||[]).push([[277],{277:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"complete-info-wrapper"},[t("el-card",{staticClass:"complete-info-card"},[t("div",{staticClass:"card-header"},[t("div",{staticClass:"header-icon"},[t("i",{staticClass:"el-icon-edit"})]),t("h2",{staticClass:"header-title"},[e._v("完善个人信息")]),t("p",{staticClass:"header-subtitle"},[e._v("让我们了解您更多一点")])]),t("el-form",{ref:"completeInfoForm",attrs:{model:e.completeInfoForm,rules:e.rules,"hide-required-asterisk":!0,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"头像：",prop:"avatar"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.completeInfoForm.avatar?t("el-image",{staticClass:"avatar",attrs:{src:e.imgBaseUrl+"/"+e.completeInfoForm.avatar}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1),t("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入真实姓名","prefix-icon":"el-icon-user",round:""},model:{value:e.completeInfoForm.name,callback:function(t){e.$set(e.completeInfoForm,"name",t)},expression:"completeInfoForm.name"}})],1),t("el-form-item",{attrs:{label:"性别：",prop:"sex"}},[t("el-radio-group",{model:{value:e.completeInfoForm.sex,callback:function(t){e.$set(e.completeInfoForm,"sex",t)},expression:"completeInfoForm.sex"}},[t("el-radio",{attrs:{label:"男"}},[t("i",{staticClass:"el-icon-male"}),e._v(" 男 ")]),t("el-radio",{attrs:{label:"女"}},[t("i",{staticClass:"el-icon-female"}),e._v(" 女 ")])],1)],1),t("el-form-item",{attrs:{label:"电话：",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入电话号码","prefix-icon":"el-icon-phone",round:""},model:{value:e.completeInfoForm.phone,callback:function(t){e.$set(e.completeInfoForm,"phone",t)},expression:"completeInfoForm.phone"}})],1),t("el-form-item",[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",round:""},on:{click:e.onCompleteInfo}},[e._v(" 提交信息 ")])],1)],1),t("div",{staticClass:"decoration"},[t("div",{staticClass:"paw paw-1"}),t("div",{staticClass:"paw paw-2"})])],1)],1)},s=[],o=(a(4114),a(7120)),l={name:"CompleteInfo",created(){const e=this.$route.query.registerUser;e&&Object.assign(this.completeInfoForm,e)},data(){return{imgBaseUrl:this.HOST,uploadUrl:"/api/file/upload",fileList:[],completeInfoForm:{name:"",avatar:"",sex:"男",phone:""},rules:{avatar:[{required:!0,message:"请上传头像",trigger:"change"}],name:[{required:!0,message:"请输入您的姓名",trigger:"blur"},{min:2,max:5,message:"姓名长度在 2 到 5 个字符",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],phone:[{required:!0,message:"请输入电话号码",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"电话号码格式不正确",trigger:"blur"}]}}},methods:{handleAvatarSuccess(e,t){this.completeInfoForm.avatar=e.data},beforeAvatarUpload(e){const t=e.type.match("image/jpeg|image/png"),a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 或 PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},onCompleteInfo(){this.$refs.completeInfoForm.validate((e=>{if(!e)return console.error("信息提交失败: 表单校验失败"),!1;o.A.put("/user/"+this.completeInfoForm.id,this.completeInfoForm).then((e=>{"0"==e.code?(this.$message({type:"success",message:"信息保存成功!"}),setTimeout((()=>{this.$router.push({path:"/login"})}),1e3)):this.$message({type:"error",message:e.msg})}))}))}}},i=l,n=a(1656),c=(0,n.A)(i,r,s,!1,null,"7b27c678",null),m=c.exports}}]);
//# sourceMappingURL=277.9c5af2ef.js.map