"use strict";(self["webpackChunkpet"]=self["webpackChunkpet"]||[]).push([[173],{2173:function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"notice-wrapper"},[t("el-card",{attrs:{shadow:"always"}},[t("div",{staticClass:"control-btns"},[t("el-popconfirm",{attrs:{title:"确认删除?"},on:{confirm:e.batchDelete},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-button",{attrs:{type:"danger",size:"medium"}},[e._v("批量删除")])]},proxy:!0}])}),t("el-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"primary",size:"medium"},on:{click:function(t){e.exportVisible=!0}}},[e._v(" 导出数据 ")])],1),t("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{inline:!0,model:e.listQuery,"label-width":"70px"}},[t("el-form-item",{attrs:{label:"订单编号"}},[t("el-input",{attrs:{placeholder:"请输入订单编号",clearable:""},model:{value:e.listQuery.orderNo,callback:function(t){e.$set(e.listQuery,"orderNo",t)},expression:"listQuery.orderNo"}})],1),t("el-form-item",{attrs:{label:"商品名称"}},[t("el-input",{attrs:{placeholder:"请输入商品名称",clearable:""},model:{value:e.listQuery.goodsName,callback:function(t){e.$set(e.listQuery,"goodsName",t)},expression:"listQuery.goodsName"}})],1),t("el-form-item",{attrs:{label:"用户姓名"}},[t("el-input",{attrs:{placeholder:"请输入用户姓名",clearable:""},model:{value:e.listQuery.username,callback:function(t){e.$set(e.listQuery,"username",t)},expression:"listQuery.username"}})],1),t("el-form-item",{attrs:{label:"物流编号"}},[t("el-input",{attrs:{placeholder:"请输入物流编号",clearable:""},model:{value:e.listQuery.trackingNumber,callback:function(t){e.$set(e.listQuery,"trackingNumber",t)},expression:"listQuery.trackingNumber"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),t("el-button",{on:{click:e.onReset}},[e._v("重置")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",attrs:{data:e.tableData,"header-cell-style":{background:"#f5f7fa",color:"#606266"},"cell-style":{padding:"8px 0"},stripe:"",border:""}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t("el-table-column",{attrs:{prop:"orderNo",label:"订单编号",width:"180","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"username",label:"用户名",width:"120"}}),t("el-table-column",{attrs:{prop:"goodsName",label:"商品名称",width:"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"deliveryStatus",label:"发货状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-tag",{attrs:{type:e.getStatusType(i.row.deliveryStatus)}},[e._v(" "+e._s(e.getStatusText(i.row.deliveryStatus))+" ")])]}}])}),t("el-table-column",{attrs:{prop:"companyName",label:"物流公司",width:"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"trackingNumber",label:"快递单号",width:"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"deliveryTime",label:"发货时间",width:"180",align:"center"}}),t("el-table-column",{attrs:{prop:"deliveryAddress",label:"发货地址","min-width":"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"recipientAddress",label:"收货地址","min-width":"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{size:"mini",type:"primary",plain:"",disabled:i.row.forbid},on:{click:function(t){return e.handleEdit(i.$index,i.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){return e.handleDelete(i.$index,i.row)}}},[e._v("删除")])]}}])})],1),t("Pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.fetchData}}),t("el-dialog",{staticClass:"dialog-form",attrs:{title:"编辑物流信息",visible:e.formVisibleEdit,width:"30%","close-on-click-modal":!1,modal:!1},on:{"update:visible":function(t){e.formVisibleEdit=t}}},[t("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.formRules,"label-width":"110px"}},[t("el-form-item",{attrs:{label:"发货状态"}},["In_Ship"===e.dialogForm.deliveryStatus?t("el-tag",[e._v("已发货")]):"W_Take"===e.dialogForm.deliveryStatus?t("el-tag",[e._v("待签收")]):"Take"===e.dialogForm.deliveryStatus?t("el-tag",[e._v("已签收")]):t("el-tag",[e._v("未知状态")])],1),t("el-form-item",{attrs:{label:"发货地址",prop:"deliveryAddress"}},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入发货地址"},model:{value:e.dialogForm.deliveryAddress,callback:function(t){e.$set(e.dialogForm,"deliveryAddress",t)},expression:"dialogForm.deliveryAddress"}})],1),t("el-form-item",{attrs:{label:"物流公司名称",prop:"courierCompanyId"}},[t("el-select",{attrs:{placeholder:"请选择物流公司"},model:{value:e.dialogForm.courierCompanyId,callback:function(t){e.$set(e.dialogForm,"courierCompanyId",t)},expression:"dialogForm.courierCompanyId"}},e._l(e.courierCompanyList,(function(e){return t("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1),t("el-form-item",{attrs:{label:"收货信息",prop:"recipientAddress"}},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入收货信息"},model:{value:e.dialogForm.recipientAddress,callback:function(t){e.$set(e.dialogForm,"recipientAddress",t)},expression:"dialogForm.recipientAddress"}})],1),t("div",{staticClass:"footer-item"},[t("el-button",{on:{click:function(t){e.formVisibleEdit=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",disabled:e.isSubmit},on:{click:function(t){return e.handleEditSave("dialogForm")}}},[e._v("确 定")])],1)],1)],1),t("el-dialog",{attrs:{title:"导出数据",visible:e.exportVisible,width:"500px"},on:{"update:visible":function(t){e.exportVisible=t}}},[t("div",{staticClass:"export-data",staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.exportTable("xlsx")}}},[e._v("EXCEL格式")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.exportTable("csv")}}},[e._v("CSV格式")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.exportTable("txt")}}},[e._v("TXT格式")])],1),t("div",{staticClass:"hints"},[e._v("TIP：请选择要导出数据的格式。")])])],1)],1)},a=[],l=i(186),s=i(1184),o=i(1867),n=i(193),d=i(7120),c={name:"NoticeList",components:{Pagination:s.A,Upload:o.A,Hints:n.A},data(){return{listLoading:!0,listQuery:{orderNo:void 0,username:void 0,trackingNumber:void 0,goodsName:void 0,currentPage:1,pageSize:10},dialogForm:{title:void 0,content:void 0},total:0,tableData:[],multipleSelection:[],courierCompanyList:[],formVisibleEdit:!1,formRules:{deliveryStatus:[{required:!0,message:"请选择发货状态",trigger:"change"}],deliveryAddress:[{required:!0,message:"请输入发货地址",trigger:"blur"}],companyName:[{required:!0,message:"请选择物流公司名称",trigger:"change"}],recipientAddress:[{required:!0,message:"请输入收货信息",trigger:"blur"}]},isSubmit:!1,filesFormat:".txt, .csv, .xls, .xlsx",exportVisible:!1}},created(){this.fetchCourierCompany(),this.fetchData()},methods:{handleSelectionChange(e){this.multipleSelection=e.map((e=>e.id))},handleEdit(e,t){this.dialogForm=JSON.parse(JSON.stringify(t)),this.formVisibleEdit=!0},fetchCourierCompany(){d.A.get("/logisticsCompany").then((e=>{"0"===e.code&&(this.courierCompanyList=e.data)}))},handleDelete(e,t){this.$confirm("此操作将删除选中数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{d.A.delete("/transportation/"+t.id).then((e=>{0==e.code?(this.$message({type:"success",message:"删除成功!"}),this.onReset()):this.$message({type:"success",errpr:"删除失败!"})}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},batchDelete(){this.multipleSelection.length<1?this.$message({message:"请先选择要删除的数据！",type:"warning"}):d.A.delete(`/transportation/deleteBatch?ids=${this.multipleSelection.join(",")}`).then((e=>{"0"===e.code?(this.$message({showClose:!0,message:"批量删除成功",type:"success"}),this.onReset()):this.$message({showClose:!0,message:e.msg,type:"error"})}))},fetchData(){this.listLoading=!0,d.A.get("/transportation/page",{params:{orderNo:this.listQuery.orderNo,username:this.listQuery.username,trackingNumber:this.listQuery.trackingNumber,goodsName:this.listQuery.goodsName,currentPage:this.listQuery.currentPage,size:this.listQuery.pageSize}}).then((e=>{const t=e.data;"0"===e.code&&(this.total=t.total,this.tableData=t.records)})),this.listLoading=!1},onSubmit(){this.listQuery.currentPage=1,this.fetchData()},onReset(){this.listQuery.currentPage=1,this.listQuery.pageSize=10,this.listQuery.orderNo="",this.listQuery.username="",this.listQuery.trackingNumber="",this.listQuery.goodsName="",this.fetchData()},handleEditSave(e){this.$refs[e].validate((e=>{e&&d.A.put("/transportation/"+this.dialogForm.id,this.dialogForm).then((e=>{0==e.code?(this.$message({showClose:!0,message:"更新成功",type:"success"}),this.fetchData(),this.formVisibleEdit=!1):this.$message({showClose:!0,message:e.msg,type:"error"})}))}))},exportTable(e){if(this.tableData.length){const t={header:["订单编号","用户名","商品名称","发货状态","物流公司名称","快递单号","发货时间","发货地址","收货地址"],key:["orderNo","username","goodsName","deliveryStatus","companyName","trackingNumber","deliveryTime","deliveryAddress","recipientAddress"],data:this.tableData,autoWidth:!0,fileName:"物流信息表",bookType:e};l.Ay.exportDataToExcel(t),this.exportVisible=!1}},getStatusType(e){const t={In_Ship:"success",W_Take:"warning",Take:"info"};return t[e]||"info"},getStatusText(e){const t={In_Ship:"已发货",W_Take:"待签收",Take:"已签收"};return t[e]||"未知状态"}}},u=c,m=i(1656),p=(0,m.A)(u,r,a,!1,null,null,null),g=p.exports}}]);
//# sourceMappingURL=173.1b4e3a7c.js.map